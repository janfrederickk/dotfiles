function venvchamp() {
    local current_dir=$(pwd)
    local dir_name=$(basename "$current_dir")
    local venv_dir="$current_dir/venv-$dir_name"
    local active_venv=${VIRTUAL_ENV:-""}

    # Helper function to remove the venv
    function remove_venv() {
        echo "ğŸ—‘ï¸ Removing existing virtual environment at $venv_dir"
        rm -rf "$venv_dir"
    }

    # Activate the virtual environment
    function activate_venv() {
        if [[ -f "$venv_dir/bin/activate" ]]; then
            echo "ğŸ‰ Activating virtual environment at $venv_dir"
            source "$venv_dir/bin/activate"
        else
            echo "âŒ Error: Activation script not found in $venv_dir"
        fi
    }

    # Check if there's already a venv in the current folder
    if [[ -d "$venv_dir" ]]; then
        echo "âš ï¸ A virtual environment already exists in the current folder: $venv_dir"

        if [[ "$active_venv" == "$venv_dir" ]]; then
            echo "âœ… The current active virtual environment is the one in this folder."
            echo ""
            echo "ğŸ”„ 1) Remove and create a new virtual environment"
            echo "ğŸ” 2) Reuse the existing virtual environment"
        else
            echo "ğŸš¨ The current active virtual environment is different: $active_venv"
            echo ""
            echo "ğŸ”„ 1) Remove the existing virtual environment and create a new one"
            echo "ğŸ” 2) Create a new virtual environment without removing the existing one"
        fi

        echo 'ğŸ’¬ Choose an option (1/2):'
        read -r choice

        if [[ "$choice" == "1" ]]; then
            remove_venv
            python3 -m venv "$venv_dir"
            echo "ğŸ‰ New virtual environment created at $venv_dir"
            activate_venv
        elif [[ "$choice" == "2" ]]; then
            if [[ ! -d "$venv_dir/bin" ]]; then
                echo "âš ï¸ Existing virtual environment appears to be incomplete. Recreating..."
                remove_venv
                python3 -m venv "$venv_dir"
                echo "ğŸ‰ New virtual environment created at $venv_dir"
            fi
            activate_venv
        else
            echo "âŒ Invalid choice. Aborting."
            return
        fi
    else
        echo "ğŸš« No virtual environment found in the current folder."
        echo "ğŸ”§ Creating a new virtual environment..."
        python3 -m venv "$venv_dir"
        echo "ğŸ‰ New virtual environment created at $venv_dir"
        activate_venv
    fi
}
